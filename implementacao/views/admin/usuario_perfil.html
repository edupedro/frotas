<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
<head>
	<meta charset="utf-8" />
	<title>{$pagina['titulo']}</title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
	<meta content="{$pagina['descricao']}" name="description" />
	<meta content="{$pagina['autor']}" name="author" />
	<meta content="{$pagina['palavras']}" name="keywords" />
	
	<link rel="shortcut icon" href="/res/admin/assets/img/fav.png" type="image/x-icon">	
	
	<!-- ================== BEGIN BASE CSS STYLE ================== -->
	<link href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
	<link href="/res/admin/assets/plugins/jquery-ui/themes/base/minified/jquery-ui.min.css" rel="stylesheet" />
	<link href="/res/admin/assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
	<link href="/res/admin/assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
	<link href="/res/admin/assets/css/animate.min.css" rel="stylesheet" />
	<link href="/res/admin/assets/css/style.css" rel="stylesheet" />
	<link href="/res/admin/assets/css/style-responsive.min.css" rel="stylesheet" />
	<link href="/res/admin/assets/css/theme/default.css" rel="stylesheet" id="theme" />
	<!-- ================== END BASE CSS STYLE ================== -->
	
	<!-- ================== BEGIN PAGE LEVEL CSS STYLE ================== -->
	<link href="/res/admin/assets/plugins/jquery-tag-it/css/jquery.tagit.css" rel="stylesheet" />
	<link href="/res/admin/assets/plugins/bootstrap-wysihtml5/src/bootstrap-wysihtml5.css" rel="stylesheet" />
	<link href="/res/admin/assets/plugins/jquery-notifyjs/styles/metro/notify-metro.css" rel="stylesheet" type="text/css" />
	<link href="/res/admin/assets/plugins/bootstrap-datepicker/css/datepicker.css" rel="stylesheet" />	
	<link href="/res/admin/assets/plugins/switchery/switchery.min.css" rel="stylesheet" />
	<!-- ================== END PAGE LEVEL CSS STYLE ================== -->

	<!-- ================== BEGIN BASE JS ================== -->
	<script src="/res/admin/assets/plugins/pace/pace.min.js"></script>
	<script src="/res/admin/assets/css/bootstrap-editable.css"></script>	
	<!-- ================== END BASE JS ================== -->
	
	<style type="text/css">
	
		.fileUpload {
		    position: relative;
		    overflow: hidden;
		    margin-bottom: 10px;
		}
		.fileUpload input.upload {
		    position: absolute;
		    top: 0;
		    right: 0;
		    margin: 0;
		    padding: 0;
		    font-size: 20px;
		    cursor: pointer;
		    opacity: 0;
		    filter: alpha(opacity=0);
		}
	
		#passwordTest {
			 width: 400px;
			 background: #F0F0F0;
			 padding: 20px;
			 border: 1px solid #DDD;
			 border-radius: 4px;
		}
		#passwordTest input[type="password"]{
			 width: 97.5%;
			 height: 25px;
			 margin-bottom: 5px;
			 border: 1px solid #DDD;
			 border-radius: 4px;
			 line-height: 25px;
			 padding-left: 5px;
			 font-size: 25px;
			 color: #829CBD;
		}
		#pass-info{
			 width: 97.5%;
			 height: 25px;
			 border: 1px solid #DDD;
			 border-radius: 4px;
			 color: #829CBD;
			 text-align: center;
			 font: 12px/25px Arial, Helvetica, sans-serif;
		}
		#pass-info.weakpass{
			 border: 1px solid #FF9191;
			 background: #FFC7C7;
			 color: #94546E;
			 text-shadow: 1px 1px 1px #FFF;
		}
		#pass-info.stillweakpass {
			 border: 1px solid #FBB;
			 background: #FDD;
			 color: #945870;
			 text-shadow: 1px 1px 1px #FFF;
		}
		#pass-info.goodpass {
			 border: 1px solid #C4EEC8;
			 background: #E4FFE4;
			 color: #51926E;
			 text-shadow: 1px 1px 1px #FFF;
		}
		#pass-info.strongpass {
			 border: 1px solid #6ED66E;
			 background: #79F079;
			 color: #348F34;
			 text-shadow: 1px 1px 1px #FFF;
		}
		#pass-info.vrystrongpass {
			 border: 1px solid #379137;
			 background: #48B448;
			 color: #CDFFCD;
			 text-shadow: 1px 1px 1px #296429;
		}
	</style>
	
</head>
<body>
	<!-- begin #page-loader -->
	<div id="page-loader" class="fade in"><span class="spinner"></span></div>
	<!-- end #page-loader -->
	
	<!-- begin #page-container -->
	<div id="page-container" class="fade page-sidebar-fixed page-header-fixed">
	
		<!-- begin #header -->
		{include="header_include"}
		<!-- end #header -->
		
		<!-- begin #sidebar -->
		{include="menu"}
		<!-- end #sidebar -->
		
		<!-- begin #content -->
		<div id="content" class="content">
		
			<!-- begin breadcrumb -->
			<ol class="breadcrumb pull-right">
				<li><a href="dashboard.php" title="Início">Início</a></li>
				<li class="active">Perfil</li>
			</ol>			
			<!-- end breadcrumb -->
			
			<!-- begin page-header -->
			<h1 class="page-header">Dados do Usuário <small> Altere senha e outras informações</small></h1>
			<!-- end page-header -->
			
               {if="$processamento==1"}
               	{if="$temErro==1"}
					<div id="msgErro1" class="alert alert-danger fade in" style="display: block;">
						<strong>Erro</strong><br>{$msgProcessamento}
					</div>
				{else}
					<div id="msgErro2" class="alert alert-success fade in" style="display: block;">
						{$msgProcessamento}
					</div>					
				{/if}
               {/if}        
			
			
			<!-- begin profile-container -->
            <div class="profile-container">
                <!-- begin profile-section -->
                <div class="profile-section">
                
            		<form name="formConfirma" id="formConfirma" method="post" enctype="multipart/form-data" action="">            
                
                    <!-- begin profile-left -->
                    <div class="profile-left">
                        <!-- begin profile-image -->
                        <div class="profile-image">
                            <img src="/views/images/pessoas/{$sessao['imagem']}" />
                            <i class="fa fa-user hide"></i>
                        </div>
                    </div>
                    <!-- end profile-left -->
                    
                    <!-- begin profile-right -->
                    <div class="profile-right">
                    
                        <!-- begin profile-info -->
                        <div class="profile-info">
                            <!-- begin table -->
                            <div class="table-responsive">
                                <table class="table table-profile">
                                    <thead>
                                        <tr>
                                            <th>&nbsp;</th>
                                            <th>
                                                <h4>{$sessao['nome']} <small>{$sessao['perfil']}</small></h4>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="highlight">
                                            <td class="field">CPF / CNPJ</td>
                                            <td>{if="$sessao['Pessoa']['cpf']"}{$sessao['Pessoa']['cpf']}{else}{$sessao['Pessoa']['cnpj']}{/if}</td>
                                        </tr>
                                        <tr>
                                            <td class="field">Acessos</td>
                                            <td>{$usuario['acessos']}</td>
                                        </tr>
                                        <tr>
                                            <td class="field">Último Acesso</td>
                                            <td>{$usuario['dataAcesso']}</td>
                                        </tr>
                                        <tr>
                                            <td class="field">IP de origem</td>
                                            <td>{$usuario['ipAcesso']}</td>
                                        </tr>
                                        <tr>
                                            <td class="field">Cadastro em</td>
                                            <td>{$sessao['dataCadastro']}</td>
                                        </tr>
                                        <tr>
                                            <td class="field">Email</td>
                                            <td><input class="form-control input-xs" name="email" id="email" type="text" onblur="minuscula(this);" value="{$sessao['email']}"></td>
                                        </tr>
                                        <tr>
                                            <td class="field">Senha</td>
                                            <td><input class="form-control input-xs" name="senha" id="senha" type="password"></td>
                                        </tr>
                                        <tr>
                                            <td class="field">Confirmação</td>
                                            <td><input class="form-control input-xs" name="confirmacao" id="confirmacao" type="password"></td>
                                        </tr>   
                                        <tr>
                                        	<td>&nbsp;</td>
                                        	<td><div id="pass-info">Força da senha</div></td>
                                        </tr>                                     
                                    </tbody>
                                    <tfoot>
                                    	<tr>
                                    		<th>&nbsp;</th>
                                    		<td>
												<button class="btn btn-info m-r-5 m-b-5" type="button" onclick="Javascript: window.location='/admin';">Cancelar</button>  
												<button class="btn btn-success m-r-5 m-b-5" type="submit">Salvar</button>
												<input type="hidden" name="idUsuario" id="idUsuario" value="{$sessao['idUsuario']}">
											</td>  
                                    	</tr>
                                    </tfoot>
                                </table>
                            </div>
                            <!-- end table -->
                        </div>
                        <!-- end profile-info -->
                        
                    </div>
                    <!-- end profile-right -->
                    
                </form>
                    
                </div>
                <!-- end profile-section -->

                        
                    </div>
                    <!-- end row -->
                </div>
                <!-- end profile-section -->
            </div>
			<!-- end profile-container -->
		</div>
		<!-- end #content -->
		
		
		
	</div>
	<!-- end page container -->
	
	<!-- ================== BEGIN BASE JS ================== -->
	<script src="/res/admin/assets/plugins/jquery/jquery-1.9.1.min.js"></script>
	<script src="/res/admin/assets/plugins/jquery/jquery-migrate-1.1.0.min.js"></script>
	<script src="/res/admin/assets/plugins/jquery-ui/ui/minified/jquery-ui.min.js"></script>
	<script src="/res/admin/assets/plugins/bootstrap/js/bootstrap.min.js"></script>
	<!--[if lt IE 9]>
		<script src="/res/admin/assets/crossbrowserjs/html5shiv.js"></script>
		<script src="/res/admin/assets/crossbrowserjs/respond.min.js"></script>
		<script src="/res/admin/assets/crossbrowserjs/excanvas.min.js"></script>
	<![endif]-->
	<script src="/res/admin/assets/plugins/slimscroll/jquery.slimscroll.min.js"></script>
	<script src="/res/admin/assets/plugins/jquery-cookie/jquery.cookie.js"></script>
	<!-- ================== END BASE JS ================== -->
	
	<!-- ================== BEGIN PAGE LEVEL JS ================== -->
	<script src="/res/admin/assets/plugins/jquery-tag-it/js/tag-it.min.js"></script>
	<script src="/res/admin/assets/js/apps.min.js"></script>
	<script src="/res/admin/assets/js/bootstrap-editable.min.js"></script>	
	<!-- ================== END PAGE LEVEL JS ================== -->
	
	<!-- Specific Page Scripts Put Here -->
	<script src="/res/admin/assets/plugins/jquery-notifyjs/notify.min.js"></script>
	<script src="/res/admin/assets/plugins/jquery-notifyjs/styles/metro/notify-metro.js"></script>
	<script src="/res/admin/assets/js/valida.js"></script>
	<script src="/res/admin/assets/js/jquery.validate.min.js"></script>
	<script src="/res/admin/assets/js/jquery.mask.min.js" type="text/javascript"></script>
	
	<script src="/res/admin/assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
	<script src="/res/admin/assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.pt-BR.js"></script>
	<script src="/res/admin/assets/plugins/switchery/switchery.min.js"></script>	

    <script src="/res/admin/assets/js/ckeditor/ckeditor.js"></script>
    
	<script>
		$(document).ready(function() {
			App.init();

		    var password1       = $('#senha');
		    var passwordsInfo   = $('#pass-info');

		    passwordStrengthCheck(password1,passwordsInfo);
		    			
	        $("#telefone").mask('(99) 99999.9999', {placeholder: "(__) _____.____"});

			$('#formConfirma').validate({
	            rules:{
	                email:{
	                    required: true,
	                    email: true
	                },
	                senha:{
	                    required: true,
		                minlength: 6,
		                maxlength: 20
	                },
	                confirmacao:{
	                    equalTo: "#senha"
	                }	                
	            },
	            messages:{
	                email:{
	                	required: "Campo obrigat\u00f3rio.",
	                	email: "Campo deve conter um endere\u00e7o de e-mail."
	                },
	                senha:{
	                	required: "Campo obrigat\u00f3rio.",
                        minlength: "Campo deve ter no m\u00ednimo 6 caracteres.",
                        maxlength: "Campo deve ter no m\u00e1ximo 20 caracteres."
	                },
	                confirmacao:{
	                    equalTo: "O valor n\u00e3o confere."
	                }	                
	            }
			});
			
		});

        function passwordStrengthCheck(password1, passwordsInfo){
            var WeakPass = /(?=.{6,}).*/; 
            var MediumPass = /^(?=S*?[a-z])(?=S*?[0-9])S{5,}$/; 
            var StrongPass = /^(?=S*?[A-Z])(?=S*?[a-z])(?=S*?[0-9])S{5,}$/; 
            var VryStrongPass = /^(?=S*?[A-Z])(?=S*?[a-z])(?=S*?[0-9])(?=S*?[^w*])S{5,}$/; 

            $(password1).on('keyup', function(e) {
                if(VryStrongPass.test(password1.val())){
                    passwordsInfo.removeClass().addClass('vrystrongpass').html("Muito Forte! (Favor não se esqueça da senha!)");
                } else if(StrongPass.test(password1.val())){
                    passwordsInfo.removeClass().addClass('strongpass').html("Forte! (Insira caracteres especiais para tornar ainda mais forte");
                } else if(MediumPass.test(password1.val())){
                    passwordsInfo.removeClass().addClass('goodpass').html("Bom! (Insira letras maiúsculas)");
                } else if(WeakPass.test(password1.val())){
                    passwordsInfo.removeClass().addClass('stillweakpass').html("fraca! (Aumentar a força da password)");
                } else{
                    passwordsInfo.removeClass().addClass('weakpass').html("Muito fraca! (Deve ter 6 ou mais caracteres)");
                }
            });
        }        
        		
		
	</script>
</body>
</html>
